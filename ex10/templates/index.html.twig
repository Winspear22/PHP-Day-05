{% extends 'base.html.twig' %}

{% block title %}Ex10 — Importation SQL & ORM{% endblock %}

{% block body %}
    <h1>Importation SQL & ORM depuis un fichier</h1>

    <div class="form-wrapper">
        {% for message in app.flashes('message') %}
            <div class="alert">{{ message }}</div>
        {% endfor %}
        {% for error in app.flashes('error') %}
            <div class="alert error">
                {{ error }}
            </div>
        {% endfor %}

        <form action="{{ path('ex10_create_sql_table') }}" method="post">
            <button type="submit">Créer la table SQL</button>
        </form>
        <form action="{{ path('ex10_import') }}" method="post">
            <button type="submit">Importer depuis le fichier</button>
        </form>
        <form action="{{ path('ex10_clear') }}" method="post" onsubmit="return confirm('Confirmer la suppression de toutes les données ?');">
            <button type="submit">Vider les deux tables</button>
        </form>
    </div>

    <h2>Données SQL</h2>
    <table>
        <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Value</th>
        </tr>
        {% for item in sqlItems %}
            <tr>
                <td>{{ item.id }}</td>
                <td>{{ item.name }}</td>
                <td>{{ item.value }}</td>
            </tr>
        {% else %}
            <tr><td colspan="3">Aucune donnée</td></tr>
        {% endfor %}
    </table>

    <h2>Données ORM</h2>
    <table>
        <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Value</th>
        </tr>
        {% for item in ormItems %}
            <tr>
                <td>{{ item.id }}</td>
                <td>{{ item.name }}</td>
                <td>{{ item.value }}</td>
            </tr>
        {% else %}
            <tr><td colspan="3">Aucune donnée</td></tr>
        {% endfor %}
    </table>
{% endblock %}
